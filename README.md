# 北大侠客行 TinTin++ 机器人

本项目是一个适用于知名 MUD 游戏《[北大侠客行](http://www.pkuxkx.com)》的辅助挂机程序。

本程序使用 [TinTin++](https://tintin.sourceforge.io)（以下称 **tt**）作为 MUD 客户端，
采用 [TinTin++ 的脚本语言](https://tintin.sourceforge.io/manual/) 编写完成，文件名后缀为 `.tin`。

## 什么是 MUD

MUD 是最早的网络游戏，是一种基于文字界面的多人角色扮演游戏，历史悠久，内涵丰富。
在古朴的终端界面下，通过阅读文字展开想象，来构筑一个庞大的虚拟世界，因此富有独特的魅力。

## 什么是北大侠客行

北大侠客行（以下称 **北侠**）于 1996 年开服，至今仍在运营，算是国内运行非常长的网络游戏了。
而且这些年一直都有更新，实属难能可贵。

基于 MUD 特有的文化，挂机在北侠也是被允许的，而在 MUD 下开发挂机程序也是一种别有风味的玩法。

## 本程序有什么用

tt 是著名的 MUD 客户端，可以用来登录北侠。本程序基于 tt 开发了一个框架，
在此基础上实现了一些常用的机器功能，以方便用户在北侠上愉快地玩耍。

目前已经实现的功能有：

* 通用
    * [X] 自动化练功：打坐、吐纳
* 武当派
    * 新手任务
        - [X] 炼丹
        - [X] 阵法
        - [ ] 采气
        - [ ] 诵经

## 如何使用本程序

### 运行环境

本程序可在 Linux 及 macOS 上运行。运行时依赖以下程序：

* tintin++ 2.01.x
* screen 4.6.2
* tmux 2.7

其中版本号是作者开发时的版本，其它版本下如果使用有问题欢迎提 issue。

### 启动并进入北侠

```
PKUXKX_ID=foo PKUXKX_PASSWD=password sh ./bot.sh
```
注意替换账号和密码。

### 通过 Docker 来启动

本项目支持通过 Docker 来运行，推荐使用 Docker 来挂机。

```
docker run --name pkuxkx --env PKUXKX_ID=foo --env PKUXKX_PASSWD=password --rm -it flwcn/pkuxkx
```
注意替换账号和密码。

## 开始挂机

启动成功后，人物还在你上次离线时的位置。要想挂机，你需要先自行走到相应的地点。

### 通用

#### 自动化练功

走到一个你认为比较安全的地方，然后输入 `liangong-start` 或 `KSLG` 开始自动化练功。
挂机程序会来回交替进行 `dazuo` 和 `tuna`。

### 武当派

#### 新手任务

新手任务在 **武当广场** 冲虚道长处领取，所以你需要先走到这里，然后输入 `ask-quest` 或 `AQ` 就可以开始自动挂机。

* 阵法

    **阵法**任务已经完全自动化，就是说获取到任务后会自动执行，然后再次回到冲虚处报告并继续获取任务。

* 炼丹

    **炼丹**任务已经完全自动化，就是说获取到任务后会自动执行，然后再次回到冲虚处报告并继续获取任务。

* 采气

    **采气**任务因为中间密林处有迷宫，因此挂机程序只能先走到密林前，然后等待人工从密林过去后，
    再次输入 `caiqi.cont1` 就可以继续。如果 `115` 秒之内无人理会，则会自动回到冲虚处取消并执行下一个任务。

* 诵经

    **诵经**任务目前还不支持挂机，所以遇到的时候会自动取消，并重新获取任务。

* 侠客

    **侠客**任务目前还不支持挂机，所以遇到的时候会自动取消，并重新获取任务。

## 命令列表

| 门派 | 分类     | 模块          | 适用位置  | 简称 / 全称           | 参数            | 功能               |
|------|----------|---------------|-----------|-----------------------|-----------------|--------------------|
| 通用 | 系统     | 框架          | 任意      | LDS / reload-scripts  | 无              | 重新加载主程序     |
| 通用 | 系统     | 框架          | 任意      | cls / clear           | 无              | 卸载模块           |
| 通用 | 系统     | 框架          | 任意      | exit / quit*          | 无              | 临时退出游戏       |
| 通用 | 系统     | 框架          | 任意      | LM / load-module      | `<module-name>` | 加载模块           |
| 通用 | 系统     | 框架          | 任意      | KM / kill-module      | `<module-name>` | 卸载模块           |
| 通用 | 系统     | 框架          | 任意      | cls / clear           | 无              | 卸载模块           |
| 通用 | 练功     | liangong      | 任意      | KSLG / liangong.start | 无              | 开始练功           |
| 通用 | 练功     | liangong      | 任意      | TZLG / liangong.stop  | 无              | 停止练功           |
| 武当 | 新手任务 | quest         | 武当广场  | AQ / ask-quest        | 无              | 获取新手任务       |
| 武当 | 新手任务 | quest         | 武当广场  | CQ / cancel-quest     | 无              | 取消新手任务       |
| 武当 | 新手任务 | quest         | 武当广场  | SQ / success-quest    | 无              | 报告新手任务       |
| 武当 | 新手任务 | quest-liandan | 武当广场  | liandan-start         | 无              | 去炼丹             |
| 武当 | 新手任务 | quest-zhenfa  | 武当广场  | zhenfa-start          | 无              | 去练习阵法         |
| 武当 | 新手任务 | quest-caiqi   | 武当广场  | caiqi.start           | 无              | 去采气             |
| 武当 | 新手任务 | quest-caiqi   | 过密林后* | caiqi.cont1           | 无              | 继续去采气         |
| 武当 | 新手任务 | quest-caiqi   | 过密林后* | caiqi.cont2           | 无              | 继续去报告采气结果 |

* 注 1: `exit`/`quit` 会直接断开北侠并关闭 tt，对北侠来说算断线。北侠系统是有这两个命令的，但会遗失身上所有物品，所以这里故意覆盖了原有命令。
* 注 2: 这里过密林后需要停留在最后一个密林房间就可以了，记住一定不要上下台阶。

## 如何贡献

* 体验
* 通过提交 issue 来反馈意见
* 通过 PR 来贡献代码
